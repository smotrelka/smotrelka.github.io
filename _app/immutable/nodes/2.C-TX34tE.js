import{b as Wr,f as I,a as N,d as Br,c as ae}from"../chunks/CEKsJHOJ.js";import{o as Kr}from"../chunks/CKwD20f1.js";import{b as qa,h as F,n as na,y as l,F as Yr,o as qr,H as Gr,q as La,t as we,v as me,f as ge,R as Qr,aE as Xr,ao as Pa,c as be,a as He,aL as pe,e as Ie,s as Zr,ae as Fa,aH as Jr,aC as da,aM as Ga,aN as et,aO as at,aP as rt,r as Qa,p as Xa,aQ as Xe,T as tt,aB as it,d as je,Q as Za,aR as Ja,ah as Le,aS as st,B as er,E as ar,aT as nt,aa as ot,W as va,j as rr,aU as lt,av as tr,K as ft,X as B,aV as ct,aW as dt,aw as ua,aX as ir,aY as vt,aZ as sr,a_ as ut,a$ as pt,b0 as _t,b1 as ht,b2 as gt,b3 as mt,b4 as bt,b5 as yt,b6 as xt,b7 as nr,aJ as wt,af as or,b8 as kt,a2 as D,a1 as Q,a3 as X,a4 as _,a6 as E,a5 as u,U as re,aK as ze,b9 as Et,u as $t,A as H,aI as se,ba as Nt,z as Oa}from"../chunks/ByYAVRVH.js";import{a as At,i as Mt,b as De,c as St,d as Tt,e as pa,n as zt,f as Ct,s as R,g as Ra,r as It}from"../chunks/DD2xMZhp.js";import{p as Me,r as ne,s as fe,i as U}from"../chunks/C7mLHEsL.js";import{s as oe}from"../chunks/uxGM06gv.js";import{B as Lt}from"../chunks/C83W6hgs.js";function Pt(e,a){return a}function Ft(e,a,r){for(var t=[],s=a.length,n,i=a.length,o=0;o<s;o++){let m=a[o];Xa(m,()=>{if(n){if(n.pending.delete(m),n.done.add(m),n.pending.size===0){var h=e.outrogroups;oa(da(n.done)),h.delete(n),h.size===0&&(e.outrogroups=null)}}else i-=1},!1)}if(i===0){var d=t.length===0&&r!==null;if(d){var f=r,c=f.parentNode;it(c),c.append(f),e.items.clear()}oa(a,!d)}else n={pending:new Set(a),done:new Set},(e.outrogroups??=new Set).add(n)}function oa(e,a=!0){for(var r=0;r<e.length;r++)je(e[r],a)}var Da;function ye(e,a,r,t,s,n=null){var i=e,o=new Map,d=(a&Ja)!==0;if(d){var f=e;i=F?we(Za(f)):f.appendChild(He())}F&&na();var c=null,m=Yr(()=>{var p=r();return Ga(p)?p:p==null?[]:da(p)}),h,w=!0;function A(){v.fallback=c,Ot(v,h,i,a,t),c!==null&&(h.length===0?(c.f&pe)===0?Qa(c):(c.f^=pe,Ce(c,null,i)):Xa(c,()=>{c=null}))}var y=qa(()=>{h=l(m);var p=h.length;let O=!1;if(F){var j=qr(i)===Gr;j!==(p===0)&&(i=La(),we(i),me(!1),O=!0)}for(var T=new Set,V=be,$=Zr(),k=0;k<p;k+=1){F&&ge.nodeType===Qr&&ge.data===Xr&&(i=ge,O=!0,me(!1));var x=h[k],C=t(x,k),b=w?null:o.get(C);b?(b.v&&Pa(b.v,x),b.i&&Pa(b.i,k),$&&V.skipped_effects.delete(b.e)):(b=Rt(o,w?i:Da??=He(),x,C,k,s,a,r),w||(b.e.f|=pe),o.set(C,b)),T.add(C)}if(p===0&&n&&!c&&(w?c=Ie(()=>n(i)):(c=Ie(()=>n(Da??=He())),c.f|=pe)),F&&p>0&&we(La()),!w)if($){for(const[q,Z]of o)T.has(q)||V.skipped_effects.add(Z.e);V.oncommit(A),V.ondiscard(()=>{})}else A();O&&me(!0),l(m)}),v={effect:y,items:o,outrogroups:null,fallback:c};w=!1,F&&(i=ge)}function Ot(e,a,r,t,s){var n=(t&st)!==0,i=a.length,o=e.items,d=e.effect.first,f,c=null,m,h=[],w=[],A,y,v,p;if(n)for(p=0;p<i;p+=1)A=a[p],y=s(A,p),v=o.get(y).e,(v.f&pe)===0&&(v.nodes?.a?.measure(),(m??=new Set).add(v));for(p=0;p<i;p+=1){if(A=a[p],y=s(A,p),v=o.get(y).e,e.outrogroups!==null)for(const b of e.outrogroups)b.pending.delete(v),b.done.delete(v);if((v.f&pe)!==0)if(v.f^=pe,v===d)Ce(v,null,r);else{var O=c?c.next:d;v===e.effect.last&&(e.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),_e(e,c,v),_e(e,v,O),Ce(v,O,r),c=v,h=[],w=[],d=c.next;continue}if((v.f&Xe)!==0&&(Qa(v),n&&(v.nodes?.a?.unfix(),(m??=new Set).delete(v))),v!==d){if(f!==void 0&&f.has(v)){if(h.length<w.length){var j=w[0],T;c=j.prev;var V=h[0],$=h[h.length-1];for(T=0;T<h.length;T+=1)Ce(h[T],j,r);for(T=0;T<w.length;T+=1)f.delete(w[T]);_e(e,V.prev,$.next),_e(e,c,V),_e(e,$,j),d=j,c=$,p-=1,h=[],w=[]}else f.delete(v),Ce(v,d,r),_e(e,v.prev,v.next),_e(e,v,c===null?e.effect.first:c.next),_e(e,c,v),c=v;continue}for(h=[],w=[];d!==null&&d!==v;)(f??=new Set).add(d),w.push(d),d=d.next;if(d===null)continue}(v.f&pe)===0&&h.push(v),c=v,d=v.next}if(e.outrogroups!==null){for(const b of e.outrogroups)b.pending.size===0&&(oa(da(b.done)),e.outrogroups?.delete(b));e.outrogroups.size===0&&(e.outrogroups=null)}if(d!==null||f!==void 0){var k=[];if(f!==void 0)for(v of f)(v.f&Xe)===0&&k.push(v);for(;d!==null;)(d.f&Xe)===0&&d!==e.fallback&&k.push(d),d=d.next;var x=k.length;if(x>0){var C=(t&Ja)!==0&&i===0?r:null;if(n){for(p=0;p<x;p+=1)k[p].nodes?.a?.measure();for(p=0;p<x;p+=1)k[p].nodes?.a?.fix()}Ft(e,k,C)}}n&&Le(()=>{if(m!==void 0)for(v of m)v.nodes?.a?.apply()})}function Rt(e,a,r,t,s,n,i,o){var d=(i&et)!==0?(i&at)===0?Jr(r,!1,!1):Fa(r):null,f=(i&rt)!==0?Fa(s):null;return{v:d,i:f,e:Ie(()=>(n(a,d??r,f??s,o),()=>{e.delete(t)}))}}function Ce(e,a,r){if(e.nodes)for(var t=e.nodes.start,s=e.nodes.end,n=a&&(a.f&pe)===0?a.nodes.start:r;t!==null;){var i=tt(t);if(n.before(t),t===s)return;t=i}}function _e(e,a,r){a===null?e.effect.first=r:a.next=r,r===null?e.effect.last=a:r.prev=a}const Dt=()=>performance.now(),ue={tick:e=>requestAnimationFrame(e),now:()=>Dt(),tasks:new Set};function lr(){const e=ue.now();ue.tasks.forEach(a=>{a.c(e)||(ue.tasks.delete(a),a.f())}),ue.tasks.size!==0&&ue.tick(lr)}function Ut(e){let a;return ue.tasks.size===0&&ue.tick(lr),{promise:new Promise(r=>{ue.tasks.add(a={c:e,f:r})}),abort(){ue.tasks.delete(a)}}}function Ue(e,a){tr(()=>{e.dispatchEvent(new CustomEvent(a))})}function Ht(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const a=e.split("-");return a.length===1?a[0]:a[0]+a.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Ua(e){const a={},r=e.split(";");for(const t of r){const[s,n]=t.split(":");if(!s||n===void 0)break;const i=Ht(s.trim());a[i]=n.trim()}return a}const jt=e=>e;function Vt(e,a,r,t){var s=(e&lt)!==0,n="both",i,o=a.inert,d=a.style.overflow,f,c;function m(){return tr(()=>i??=r()(a,t?.()??{},{direction:n}))}var h={is_global:s,in(){a.inert=o,Ue(a,"introstart"),f=la(a,m(),c,1,()=>{Ue(a,"introend"),f?.abort(),f=i=void 0,a.style.overflow=d})},out(v){a.inert=!0,Ue(a,"outrostart"),c=la(a,m(),f,0,()=>{Ue(a,"outroend"),v?.()})},stop:()=>{f?.abort(),c?.abort()}},w=er;if((w.nodes.t??=[]).push(h),At){var A=s;if(!A){for(var y=w.parent;y&&(y.f&ar)!==0;)for(;(y=y.parent)&&(y.f&nt)===0;);A=!y||(y.f&ot)!==0}A&&va(()=>{rr(()=>h.in())})}}function la(e,a,r,t,s){var n=t===1;if(ft(a)){var i,o=!1;return Le(()=>{if(!o){var v=a({direction:n?"in":"out"});i=la(e,v,r,t,s)}}),{abort:()=>{o=!0,i?.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(r?.deactivate(),!a?.duration)return s(),{abort:B,deactivate:B,reset:B,t:()=>t};const{delay:d=0,css:f,tick:c,easing:m=jt}=a;var h=[];if(n&&r===void 0&&(c&&c(0,1),f)){var w=Ua(f(0,1));h.push(w,w)}var A=()=>1-t,y=e.animate(h,{duration:d,fill:"forwards"});return y.onfinish=()=>{y.cancel();var v=r?.t()??1-t;r?.abort();var p=t-v,O=a.duration*Math.abs(p),j=[];if(O>0){var T=!1;if(f)for(var V=Math.ceil(O/16.666666666666668),$=0;$<=V;$+=1){var k=v+p*m($/V),x=Ua(f(k,1-k));j.push(x),T||=x.overflow==="hidden"}T&&(e.style.overflow="hidden"),A=()=>{var C=y.currentTime;return v+p*m(C/O)},c&&Ut(()=>{if(y.playState!=="running")return!1;var C=A();return c(C,1-C),!0})}y=e.animate(j,{duration:O,fill:"forwards"}),y.onfinish=()=>{A=()=>t,c?.(t,1-t),s()}},{abort:()=>{y&&(y.cancel(),y.effect=null,y.onfinish=B)},deactivate:()=>{s=B},reset:()=>{t===0&&c?.(1,0)},t:()=>A()}}function Wt(e,a,r,t,s,n){let i=F;F&&na();var o=null;F&&ge.nodeType===ct&&(o=ge,na());var d=F?ge:e,f=new Lt(d,!1);qa(()=>{const c=a()||null;var m=dt;if(c===null){f.ensure(null,null),De(!0);return}return f.ensure(c,h=>{if(c){if(o=F?o:document.createElementNS(m,c),Wr(o,o),t){F&&Mt(c)&&o.append(document.createComment(""));var w=F?Za(o):o.appendChild(He());F&&(w===null?me(!1):we(w)),t(o,w)}er.nodes.end=o,h.before(o)}F&&we(h)}),De(!0),()=>{c&&De(!1)}},ar),ua(()=>{De(!0)}),i&&(me(!0),we(d))}function Bt(e,a){var r=void 0,t;ir(()=>{r!==(r=a())&&(t&&(je(t),t=null),r&&(t=Ie(()=>{va(()=>r(e))})))})}function fr(e){var a,r,t="";if(typeof e=="string"||typeof e=="number")t+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(a=0;a<s;a++)e[a]&&(r=fr(e[a]))&&(t&&(t+=" "),t+=r)}else for(r in e)e[r]&&(t&&(t+=" "),t+=r);return t}function Kt(){for(var e,a,r=0,t="",s=arguments.length;r<s;r++)(e=arguments[r])&&(a=fr(e))&&(t&&(t+=" "),t+=a);return t}function fa(e){return typeof e=="object"?Kt(e):e??""}const Ha=[...` 	
\r\f \v\uFEFF`];function Yt(e,a,r){var t=e==null?"":""+e;if(a&&(t=t?t+" "+a:a),r){for(var s in r)if(r[s])t=t?t+" "+s:s;else if(t.length)for(var n=s.length,i=0;(i=t.indexOf(s,i))>=0;){var o=i+n;(i===0||Ha.includes(t[i-1]))&&(o===t.length||Ha.includes(t[o]))?t=(i===0?"":t.substring(0,i))+t.substring(o+1):i=o}}return t===""?null:t}function ja(e,a=!1){var r=a?" !important;":";",t="";for(var s in e){var n=e[s];n!=null&&n!==""&&(t+=" "+s+": "+n+r)}return t}function Ze(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function qt(e,a){if(a){var r="",t,s;if(Array.isArray(a)?(t=a[0],s=a[1]):t=a,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var n=!1,i=0,o=!1,d=[];t&&d.push(...Object.keys(t).map(Ze)),s&&d.push(...Object.keys(s).map(Ze));var f=0,c=-1;const y=e.length;for(var m=0;m<y;m++){var h=e[m];if(o?h==="/"&&e[m-1]==="*"&&(o=!1):n?n===h&&(n=!1):h==="/"&&e[m+1]==="*"?o=!0:h==='"'||h==="'"?n=h:h==="("?i++:h===")"&&i--,!o&&n===!1&&i===0){if(h===":"&&c===-1)c=m;else if(h===";"||m===y-1){if(c!==-1){var w=Ze(e.substring(f,c).trim());if(!d.includes(w)){h!==";"&&m++;var A=e.substring(f,m).trim();r+=" "+A+";"}}f=m+1,c=-1}}}}return t&&(r+=ja(t)),s&&(r+=ja(s,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function xe(e,a,r,t,s,n){var i=e.__className;if(F||i!==r||i===void 0){var o=Yt(r,t,n);(!F||o!==e.getAttribute("class"))&&(o==null?e.removeAttribute("class"):a?e.className=o:e.setAttribute("class",o)),e.__className=r}else if(n&&s!==n)for(var d in n){var f=!!n[d];(s==null||f!==!!s[d])&&e.classList.toggle(d,f)}return n}function Je(e,a={},r,t){for(var s in r){var n=r[s];a[s]!==n&&(r[s]==null?e.style.removeProperty(s):e.style.setProperty(s,n,t))}}function Gt(e,a,r,t){var s=e.__style;if(F||s!==a){var n=qt(a,t);(!F||n!==e.getAttribute("style"))&&(n==null?e.removeAttribute("style"):e.style.cssText=n),e.__style=a}else t&&(Array.isArray(t)?(Je(e,r?.[0],t[0]),Je(e,r?.[1],t[1],"important")):Je(e,r,t));return t}function ca(e,a,r=!1){if(e.multiple){if(a==null)return;if(!Ga(a))return vt();for(var t of e.options)t.selected=a.includes(Va(t));return}for(t of e.options){var s=Va(t);if(sr(s,a)){t.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function Qt(e){var a=new MutationObserver(()=>{ca(e,e.__value)});a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ua(()=>{a.disconnect()})}function Va(e){return"__value"in e?e.__value:e.value}const Se=Symbol("class"),Te=Symbol("style"),cr=Symbol("is custom element"),dr=Symbol("is html");function _a(e){if(F){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var t=e.value;ee(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var s=e.checked;ee(e,"checked",null),e.checked=s}}};e.__on_r=r,Le(r),gt()}}function Xt(e,a){a?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function ee(e,a,r,t){var s=vr(e);F&&(s[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||s[a]!==(s[a]=r)&&(a==="loading"&&(e[yt]=r),r==null?e.removeAttribute(a):typeof r!="string"&&ur(e).includes(a)?e[a]=r:e.setAttribute(a,r))}function Zt(e,a,r,t,s=!1,n=!1){if(F&&s&&e.tagName==="INPUT"){var i=e,o=i.type==="checkbox"?"defaultChecked":"defaultValue";o in r||_a(i)}var d=vr(e),f=d[cr],c=!d[dr];let m=F&&f;m&&me(!1);var h=a||{},w=e.tagName==="OPTION";for(var A in a)A in r||(r[A]=null);r.class?r.class=fa(r.class):r[Se]&&(r.class=null),r[Te]&&(r.style??=null);var y=ur(e);for(const $ in r){let k=r[$];if(w&&$==="value"&&k==null){e.value=e.__value="",h[$]=k;continue}if($==="class"){var v=e.namespaceURI==="http://www.w3.org/1999/xhtml";xe(e,v,k,t,a?.[Se],r[Se]),h[$]=k,h[Se]=r[Se];continue}if($==="style"){Gt(e,k,a?.[Te],r[Te]),h[$]=k,h[Te]=r[Te];continue}var p=h[$];if(!(k===p&&!(k===void 0&&e.hasAttribute($)))){h[$]=k;var O=$[0]+$[1];if(O!=="$$")if(O==="on"){const x={},C="$$"+$;let b=$.slice(2);var j=Ct(b);if(St(b)&&(b=b.slice(0,-7),x.capture=!0),!j&&p){if(k!=null)continue;e.removeEventListener(b,h[C],x),h[C]=null}if(k!=null)if(j)e[`__${b}`]=k,pa([b]);else{let q=function(Z){h[$].call(this,Z)};h[C]=Tt(b,e,q,x)}else j&&(e[`__${b}`]=void 0)}else if($==="style")ee(e,$,k);else if($==="autofocus")_t(e,!!k);else if(!f&&($==="__value"||$==="value"&&k!=null))e.value=e.__value=k;else if($==="selected"&&w)Xt(e,k);else{var T=$;c||(T=zt(T));var V=T==="defaultValue"||T==="defaultChecked";if(k==null&&!f&&!V)if(d[$]=null,T==="value"||T==="checked"){let x=e;const C=a===void 0;if(T==="value"){let b=x.defaultValue;x.removeAttribute(T),x.defaultValue=b,x.value=x.__value=C?b:null}else{let b=x.defaultChecked;x.removeAttribute(T),x.defaultChecked=b,x.checked=C?b:!1}}else e.removeAttribute($);else V||y.includes(T)&&(f||typeof k!="string")?(e[T]=k,T in d&&(d[T]=ht)):typeof k!="function"&&ee(e,T,k)}}}return m&&me(!0),h}function Wa(e,a,r=[],t=[],s=[],n,i=!1,o=!1){ut(s,r,t,d=>{var f=void 0,c={},m=e.nodeName==="SELECT",h=!1;if(ir(()=>{var A=a(...d.map(l)),y=Zt(e,f,A,n,i,o);h&&m&&"value"in A&&ca(e,A.value);for(let p of Object.getOwnPropertySymbols(c))A[p]||je(c[p]);for(let p of Object.getOwnPropertySymbols(A)){var v=A[p];p.description===pt&&(!f||v!==f[p])&&(c[p]&&je(c[p]),c[p]=Ie(()=>Bt(e,()=>v))),y[p]=v}f=y}),m){var w=e;va(()=>{ca(w,f.value,!0),Qt(w)})}h=!0})}function vr(e){return e.__attributes??={[cr]:e.nodeName.includes("-"),[dr]:e.namespaceURI===mt}}var Ba=new Map;function ur(e){var a=e.getAttribute("is")||e.nodeName,r=Ba.get(a);if(r)return r;Ba.set(a,r=[]);for(var t,s=e,n=Element.prototype;n!==s;){t=xt(s);for(var i in t)t[i].set&&r.push(i);s=bt(s)}return r}function Jt(e,a,r=a){var t=new WeakSet;nr(e,"input",async s=>{var n=s?e.defaultValue:e.value;if(n=aa(e)?ra(n):n,r(n),be!==null&&t.add(be),await wt(),n!==(n=a())){var i=e.selectionStart,o=e.selectionEnd,d=e.value.length;if(e.value=n??"",o!==null){var f=e.value.length;i===o&&o===d&&f>d?(e.selectionStart=f,e.selectionEnd=f):(e.selectionStart=i,e.selectionEnd=Math.min(o,f))}}}),(F&&e.defaultValue!==e.value||rr(a)==null&&e.value)&&(r(aa(e)?ra(e.value):e.value),be!==null&&t.add(be)),or(()=>{var s=a();if(e===document.activeElement){var n=kt??be;if(t.has(n))return}aa(e)&&s===ra(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}const ea=new Set;function ei(e,a,r,t,s=t){var n=r.getAttribute("type")==="checkbox",i=e;let o=!1;if(a!==null)for(var d of a)i=i[d]??=[];i.push(r),nr(r,"change",()=>{var f=r.__value;n&&(f=Ka(i,f,r.checked)),s(f)},()=>s(n?[]:null)),or(()=>{var f=t();if(F&&r.defaultChecked!==r.checked){o=!0;return}n?(f=f||[],r.checked=f.includes(r.__value)):r.checked=sr(r.__value,f)}),ua(()=>{var f=i.indexOf(r);f!==-1&&i.splice(f,1)}),ea.has(i)||(ea.add(i),Le(()=>{i.sort((f,c)=>f.compareDocumentPosition(c)===4?-1:1),ea.delete(i)})),Le(()=>{if(o){var f;if(n)f=Ka(i,f,r.checked);else{var c=i.find(m=>m.checked);f=c?.__value}s(f)}})}function Ka(e,a,r){for(var t=new Set,s=0;s<e.length;s+=1)e[s].checked&&t.add(e[s].__value);return r||t.delete(a),Array.from(t)}function aa(e){var a=e.type;return a==="number"||a==="range"}function ra(e){return e===""?null:+e}const pr="https://api.smotrelka.org",ta={turbo:"Turbo",kodik:"Kodik",lumex:"Lumex",flixcdn:"FlixCDN",movie:"Фильм",series:"Сериал",anime_movie:"Аниме-фильм",anime_series:"Аниме-сериал",cartoon:"Мультфильм?",cartoon_movie:"Мультфильм",cartoon_series:"Мультсериал",show:"ТВ-Шоу",released:"Вышел",ongoing:"Выходит",anons:"Анонс",pg_13:"pg13"};function ia(e,a="ru"){const r=new Date(e),t=new Date,s=Math.floor((r.getTime()-t.getTime())/1e3),n=[{unit:"year",seconds:31536e3},{unit:"month",seconds:2592e3},{unit:"day",seconds:86400},{unit:"hour",seconds:3600},{unit:"minute",seconds:60},{unit:"second",seconds:1}];for(const{unit:i,seconds:o}of n)if(Math.abs(s)>=o||i==="second"){const d=Math.round(s/o);return new Intl.RelativeTimeFormat(a,{numeric:"auto"}).format(d,i)}}function sa(e,a="ru"){const r=new Date(e);return new Intl.DateTimeFormat(a,{hour:"2-digit",minute:"2-digit",second:"2-digit",day:"2-digit",month:"2-digit",year:"numeric",hour12:!1}).format(r)}var ai=I('<iframe title="Smotrelka" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" width="100%" height="100%" frameborder="0" allowfullscreen="" allow="autoplay *; fullscreen *; accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" tabindex="-1"></iframe>');function ri(e,a){var r=ai();D(()=>ee(r,"src",a.embedUrl)),N(e,r)}const ti={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var ii=Br("<svg><!><!></svg>");function ce(e,a){Q(a,!0);const r=Me(a,"color",3,"currentColor"),t=Me(a,"size",3,24),s=Me(a,"strokeWidth",3,2),n=Me(a,"absoluteStrokeWidth",3,!1),i=Me(a,"iconNode",19,()=>[]),o=ne(a,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var d=ii();Wa(d,m=>({...ti,...o,width:t(),height:t(),stroke:r(),"stroke-width":m,class:["lucide-icon lucide",a.name&&`lucide-${a.name}`,a.class]}),[()=>n()?Number(s())*24/Number(t()):s()]);var f=_(d);ye(f,17,i,Pt,(m,h)=>{var w=ze(()=>Et(l(h),2));let A=()=>l(w)[0],y=()=>l(w)[1];var v=ae(),p=re(v);Wt(p,A,!0,(O,j)=>{Wa(O,()=>({...y()}))}),N(m,v)});var c=E(f);oe(c,()=>a.children??B),u(d),N(e,d),X()}function si(e,a){Q(a,!0);let r=ne(a,["$$slots","$$events","$$legacy"]);const t=[["path",{d:"M16 14v2.2l1.6 1"}],["path",{d:"M16 2v4"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"}],["path",{d:"M3 10h5"}],["path",{d:"M8 2v4"}],["circle",{cx:"16",cy:"16",r:"6"}]];ce(e,fe({name:"calendar-clock"},()=>r,{get iconNode(){return t},children:(s,n)=>{var i=ae(),o=re(i);oe(o,()=>a.children??B),N(s,i)},$$slots:{default:!0}})),X()}function ni(e,a){Q(a,!0);let r=ne(a,["$$slots","$$events","$$legacy"]);const t=[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]];ce(e,fe({name:"calendar"},()=>r,{get iconNode(){return t},children:(s,n)=>{var i=ae(),o=re(i);oe(o,()=>a.children??B),N(s,i)},$$slots:{default:!0}})),X()}function Ya(e,a){Q(a,!0);let r=ne(a,["$$slots","$$events","$$legacy"]);const t=[["path",{d:"m6 9 6 6 6-6"}]];ce(e,fe({name:"chevron-down"},()=>r,{get iconNode(){return t},children:(s,n)=>{var i=ae(),o=re(i);oe(o,()=>a.children??B),N(s,i)},$$slots:{default:!0}})),X()}function oi(e,a){Q(a,!0);let r=ne(a,["$$slots","$$events","$$legacy"]);const t=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];ce(e,fe({name:"circle-alert"},()=>r,{get iconNode(){return t},children:(s,n)=>{var i=ae(),o=re(i);oe(o,()=>a.children??B),N(s,i)},$$slots:{default:!0}})),X()}function li(e,a){Q(a,!0);let r=ne(a,["$$slots","$$events","$$legacy"]);const t=[["path",{d:"M12 6v6l3.644 1.822"}],["path",{d:"M16 19h6"}],["path",{d:"M19 16v6"}],["path",{d:"M21.92 13.267a10 10 0 1 0-8.653 8.653"}]];ce(e,fe({name:"clock-plus"},()=>r,{get iconNode(){return t},children:(s,n)=>{var i=ae(),o=re(i);oe(o,()=>a.children??B),N(s,i)},$$slots:{default:!0}})),X()}function fi(e,a){Q(a,!0);let r=ne(a,["$$slots","$$events","$$legacy"]);const t=[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]];ce(e,fe({name:"external-link"},()=>r,{get iconNode(){return t},children:(s,n)=>{var i=ae(),o=re(i);oe(o,()=>a.children??B),N(s,i)},$$slots:{default:!0}})),X()}function ci(e,a){Q(a,!0);let r=ne(a,["$$slots","$$events","$$legacy"]);const t=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"}],["path",{d:"m2 2 20 20"}]];ce(e,fe({name:"eye-off"},()=>r,{get iconNode(){return t},children:(s,n)=>{var i=ae(),o=re(i);oe(o,()=>a.children??B),N(s,i)},$$slots:{default:!0}})),X()}function di(e,a){Q(a,!0);let r=ne(a,["$$slots","$$events","$$legacy"]);const t=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}],["path",{d:"M12 7v5l4 2"}]];ce(e,fe({name:"history"},()=>r,{get iconNode(){return t},children:(s,n)=>{var i=ae(),o=re(i);oe(o,()=>a.children??B),N(s,i)},$$slots:{default:!0}})),X()}function _r(e,a){Q(a,!0);let r=ne(a,["$$slots","$$events","$$legacy"]);const t=[["path",{d:"M12 2v4"}],["path",{d:"m16.2 7.8 2.9-2.9"}],["path",{d:"M18 12h4"}],["path",{d:"m16.2 16.2 2.9 2.9"}],["path",{d:"M12 18v4"}],["path",{d:"m4.9 19.1 2.9-2.9"}],["path",{d:"M2 12h4"}],["path",{d:"m4.9 4.9 2.9 2.9"}]];ce(e,fe({name:"loader"},()=>r,{get iconNode(){return t},children:(s,n)=>{var i=ae(),o=re(i);oe(o,()=>a.children??B),N(s,i)},$$slots:{default:!0}})),X()}function vi(e,a){Q(a,!0);let r=ne(a,["$$slots","$$events","$$legacy"]);const t=[["path",{d:"m21 21-4.34-4.34"}],["circle",{cx:"11",cy:"11",r:"8"}]];ce(e,fe({name:"search"},()=>r,{get iconNode(){return t},children:(s,n)=>{var i=ae(),o=re(i);oe(o,()=>a.children??B),N(s,i)},$$slots:{default:!0}})),X()}function ui(e,a){Q(a,!0);let r=ne(a,["$$slots","$$events","$$legacy"]);const t=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor"}]];ce(e,fe({name:"tag"},()=>r,{get iconNode(){return t},children:(s,n)=>{var i=ae(),o=re(i);oe(o,()=>a.children??B),N(s,i)},$$slots:{default:!0}})),X()}function pi(e){const a=e-1;return a*a*a+1}function _i(e,{delay:a=0,duration:r=400,easing:t=pi,axis:s="y"}={}){const n=getComputedStyle(e),i=+n.opacity,o=s==="y"?"height":"width",d=parseFloat(n[o]),f=s==="y"?["top","bottom"]:["left","right"],c=f.map(p=>`${p[0].toUpperCase()}${p.slice(1)}`),m=parseFloat(n[`padding${c[0]}`]),h=parseFloat(n[`padding${c[1]}`]),w=parseFloat(n[`margin${c[0]}`]),A=parseFloat(n[`margin${c[1]}`]),y=parseFloat(n[`border${c[0]}Width`]),v=parseFloat(n[`border${c[1]}Width`]);return{delay:a,duration:r,easing:t,css:p=>`overflow: hidden;opacity: ${Math.min(p*20,1)*i};${o}: ${p*d}px;padding-${f[0]}: ${p*m}px;padding-${f[1]}: ${p*h}px;margin-${f[0]}: ${p*w}px;margin-${f[1]}: ${p*A}px;border-${f[0]}-width: ${p*y}px;border-${f[1]}-width: ${p*v}px;min-${o}: 0`}}var hi=I('<img class="absolute inset-0 z-10 h-full w-full bg-zinc-900 object-cover object-center" loading="lazy"/>'),gi=I('<span class="inline-flex items-center gap-1.5" title="Категория"><!> <span> </span></span>'),mi=I('<span class="inline-flex items-center gap-1.5" title="Год производства / выхода"><!> <span> </span></span>'),bi=I('<span class="inline-flex items-center gap-1.5 bg-yellow-500/10 px-2 py-1 font-semibold text-yellow-500" title="Рейтинг IMDb"><span class="text-bold">IMDb</span> <span> </span></span>'),yi=I('<span class="inline-flex items-center gap-1.5 bg-orange-500/10 px-2 py-1 font-semibold text-orange-500" title="Рейтинг КиноПоиск"><span class="text-bold">KP</span> <span> </span></span>'),xi=I('<span class="inline-flex items-center gap-1.5 bg-sky-500/10 px-2 py-1 font-semibold text-sky-500" title="Рейтинг Shikimori"><span class="text-bold">SHIKI</span> <span> </span></span>'),wi=I('<span class="inline-flex items-center gap-1.5 bg-blue-500/10 px-2 py-1 font-semibold text-blue-500" title="Рейтинг MyDramaList"><span class="text-bold">MDL</span> <span> </span></span>'),ki=I('<span class="inline-flex items-center gap-1.5 border border-zinc-900 p-2"><!> <span>Следующий эпизод: <span class="font-semibold"> </span></span></span>'),Ei=I("<span> </span>"),$i=I("<span> </span>"),Ni=I("<span> </span>"),Ai=I('<span title="Возрастное ограничение"><!> <!></span>'),Mi=I('<span class="bg-zinc-900 p-2"> </span>'),Si=I('<div class="flex flex-wrap gap-2 text-xs"></div>'),Ti=I('<span class="border border-zinc-900 p-2"> </span>'),zi=I('<div class="flex flex-wrap gap-2 text-xs"></div>'),Ci=I('<div class="text-sm text-pretty opacity-70 transition-opacity hover:opacity-100"> </div>'),Ii=I('<div class="text-sm text-pretty italic opacity-70 transition-opacity hover:opacity-100"> </div>'),Li=I('<li class="py-2 pr-3 pl-9"><label class="group/item flex cursor-pointer items-start gap-3"><input type="radio" name="provider-url" class="peer mt-1 accent-white"/> <div class="min-w-0 flex-1 opacity-60 transition-opacity group-hover/item:opacity-100 peer-checked:opacity-100"><div class="font-medium"> </div> <div class="mt-0.5 text-sm opacity-70"> </div></div> <a target="_blank" rel="external noopener noreferrer" class="shrink-0 p-1 opacity-40 transition-opacity hover:opacity-100"><!></a></label></li>'),Pi=I('<details class="group"><summary class="flex cursor-pointer list-none items-center gap-3 py-3 pr-4 opacity-70 transition-opacity hover:opacity-100"><span class="w-6 text-right text-sm tabular-nums opacity-50"> </span> <span class="flex-1 font-medium"> </span> <!></summary> <div class="pb-2"><ul></ul></div></details>'),Fi=I('<div class="divide-y divide-zinc-900"></div>'),Oi=I('<div class="relative bg-black" style="padding-top: 56.25%;" tabindex="-1"><!></div>'),Ri=I('<div class="relative"><div class="flex justify-between gap-3 space-y-4 p-4 pt-0"><div class="w-full space-y-3"><div class="flex flex-wrap justify-between gap-x-6 gap-y-3"><div class="flex flex-wrap gap-2 text-xs"><span class="inline-flex items-center gap-1.5 border border-zinc-900 p-2"><!> <span>Добавлено: <span class="font-semibold"> </span></span></span> <span class="inline-flex items-center gap-1.5 border border-zinc-900 p-2"><!> <span>Обновлено: <span class="font-semibold"> </span></span></span> <!> <!></div> <div class="flex flex-wrap gap-2"><!> <!></div></div> <!> <!></div></div> <!> <!></div>'),Di=I('<div class="relative will-change-transform"><button type="button"><span class="flex grow items-center gap-4"><div class="relative inline-flex h-22 w-16 shrink-0 items-center justify-center overflow-hidden bg-zinc-900"><!> <!></div> <span class="grow"><span> </span> <span class="mt-1 block text-xs text-balance opacity-70 sm:text-sm"> </span> <span class="mt-4 flex w-full flex-wrap items-center gap-3 text-xs text-zinc-300 sm:text-sm"><span class="flex flex-wrap gap-4 text-xs"><!> <!></span></span></span></span> <span class="flex grow flex-wrap items-start justify-between gap-2 text-xs sm:grow-0"><span class="flex flex-wrap"><!> <!> <!> <!></span> <span><!></span></span></button> <!></div>');function Ui(e,a){Q(a,!0);const r=[];let t=se(!1),s=se(!1),n=se(0),i=se(null),o=se(null);$t(()=>{l(d)&&l(d).length===1&&l(d)[0].items.length===1&&H(o,l(d)[0].items[0].url,!0)});const d=ze(()=>l(i)?.providers.map(g=>{const M=g.items.some(L=>L.idType==="shikimori");return{...g,items:M?g.items.filter(L=>L.idType==="shikimori"):g.items}}).filter(g=>g.items.length>0)),f=ze(()=>l(d)&&!(l(d).length===1&&l(d)[0].items.length===1)),c=ze(()=>a.media.posters?.[l(n)]);function m(){Nt(n)}async function h(){l(t)?H(t,!1):await w()}async function w(){if(!l(s)){H(s,!0);try{const g=await fetch(`${pr}/api/media/${a.media.id}`);if(!g.ok){console.error(g.body),alert("Failed to load media data");return}const M=await g.json();H(i,M,!0),H(t,!0)}catch(g){console.error(g),H(t,!1)}finally{H(s,!1)}}}var A=Di(),y=_(A);xe(y,1,fa({"group relative z-10 flex w-full flex-wrap justify-between gap-4 p-4 text-left outline-offset-3 transition-[background-color] duration-300 not-disabled:cursor-pointer hover:duration-[0ms] focus:outline focus:outline-violet-500":!0})),y.__click=h;var v=_(y),p=_(v),O=_(p);ci(O,{size:20,class:"opacity-70"});var j=E(O,2);{var T=g=>{var M=hi();D(()=>{ee(M,"src",l(c)),ee(M,"alt",a.media.title)}),Ra("error",M,m),It(M),N(g,M)};U(j,g=>{l(c)&&g(T)})}u(p);var V=E(p,2),$=_(V);let k;var x=_($,!0);u($);var C=E($,2),b=_(C,!0);u(C);var q=E(C,2),Z=_(q),Pe=_(Z);{var Ve=g=>{var M=gi(),L=_(M);ui(L,{class:"text-rose-600",size:16});var K=E(L,2),G=_(K,!0);u(K),u(M),D(()=>R(G,ta[a.media.category]||a.media.category)),N(g,M)};U(Pe,g=>{a.media.category&&g(Ve)})}var ke=E(Pe,2);{var hr=g=>{var M=mi(),L=_(M);ni(L,{size:16});var K=E(L,2),G=_(K,!0);u(K),u(M),D(()=>R(G,a.media.year)),N(g,M)};U(ke,g=>{a.media.year&&g(hr)})}u(Z),u(q),u(V),u(v);var ha=E(v,2),We=_(ha),ga=_(We);{var gr=g=>{var M=bi(),L=E(_(M),2),K=_(L,!0);u(L),u(M),D(G=>R(K,G),[()=>l(i).imdb_rating.toFixed(2)]),N(g,M)};U(ga,g=>{l(i)?.imdb_rating&&g(gr)})}var ma=E(ga,2);{var mr=g=>{var M=yi(),L=E(_(M),2),K=_(L,!0);u(L),u(M),D(G=>R(K,G),[()=>l(i).kinopoisk_rating.toFixed(2)]),N(g,M)};U(ma,g=>{l(i)?.kinopoisk_rating&&g(mr)})}var ba=E(ma,2);{var br=g=>{var M=xi(),L=E(_(M),2),K=_(L,!0);u(L),u(M),D(G=>R(K,G),[()=>l(i).shikimori_rating.toFixed(2)]),N(g,M)};U(ba,g=>{l(i)?.shikimori_rating&&g(br)})}var yr=E(ba,2);{var xr=g=>{var M=wi(),L=E(_(M),2),K=_(L,!0);u(L),u(M),D(G=>R(K,G),[()=>l(i).mydramalist_rating.toFixed(2)]),N(g,M)};U(yr,g=>{l(i)?.mydramalist_rating&&g(xr)})}u(We);var Be=E(We,2),wr=_(Be);{var kr=g=>{_r(g,{size:16,class:"animate-spin"})},Er=g=>{{let M=ze(()=>({"rotate-180":l(t)}));Ya(g,{size:16,get class(){return l(M)}})}};U(wr,g=>{l(s)?g(kr):g(Er,!1)})}u(Be),u(ha),u(y);var $r=E(y,2);{var Nr=g=>{var M=Ri(),L=_(M),K=_(L),G=_(K),Ke=_(G),Fe=_(Ke),ya=_(Fe);li(ya,{size:14});var xa=E(ya,2),wa=E(_(xa)),Ar=_(wa,!0);u(wa),u(xa),u(Fe);var Oe=E(Fe,2),ka=_(Oe);di(ka,{size:14});var Ea=E(ka,2),$a=E(_(Ea)),Mr=_($a,!0);u($a),u(Ea),u(Oe);var Na=E(Oe,2);{var Sr=z=>{var S=ki(),P=_(S);si(P,{size:14});var Y=E(P,2),W=E(_(Y)),le=_(W,!0);u(W),u(Y),u(S),D((he,te)=>{ee(S,"title",he),R(le,te)},[()=>sa(l(i).next_episode_at),()=>ia(l(i).next_episode_at)]),N(z,S)};U(Na,z=>{l(i)?.next_episode_at&&z(Sr)})}var Tr=E(Na,2);{var zr=z=>{var S=Ai();let P;var Y=_(S);oi(Y,{size:14});var W=E(Y,2);{var le=te=>{var de=Ei(),Ee=_(de);u(de),D(()=>R(Ee,`${(ta[l(i).rating_mpaa]||l(i).rating_mpaa)??""} (${l(i).minimal_age??""}+)`)),N(te,de)},he=te=>{var de=ae(),Ee=re(de);{var Ye=ve=>{var J=$i(),ie=_(J,!0);u(J),D(()=>R(ie,ta[l(i).rating_mpaa]||l(i).rating_mpaa)),N(ve,J)},Re=ve=>{var J=Ni(),ie=_(J);u(J),D(()=>R(ie,`${l(i).minimal_age??""}+`)),N(ve,J)};U(Ee,ve=>{l(i).rating_mpaa?ve(Ye):ve(Re,!1)},!0)}N(te,de)};U(W,te=>{l(i)?.rating_mpaa&&l(i)?.minimal_age?te(le):te(he,!1)})}u(S),D(te=>P=xe(S,1,"inline-flex items-center gap-1.5 border border-zinc-900 p-2 uppercase",null,P,te),[()=>({"text-red-400":l(i)&&(l(i).rating_mpaa?.toLowerCase().startsWith("r")||l(i).minimal_age&&l(i).minimal_age>=18)})]),N(z,S)};U(Tr,z=>{(l(i)?.rating_mpaa||l(i)?.minimal_age)&&z(zr)})}u(Ke);var Aa=E(Ke,2),Ma=_(Aa);{var Cr=z=>{var S=Si();ye(S,20,()=>l(i).countries,P=>P,(P,Y)=>{var W=Mi(),le=_(W,!0);u(W),D(()=>R(le,Y)),N(P,W)}),u(S),N(z,S)};U(Ma,z=>{l(i)?.countries?.length&&z(Cr)})}var Ir=E(Ma,2);{var Lr=z=>{var S=zi();ye(S,20,()=>l(i).genres,P=>P,(P,Y)=>{var W=Ti(),le=_(W,!0);u(W),D(()=>R(le,Y)),N(P,W)}),u(S),N(z,S)};U(Ir,z=>{l(i)?.genres?.length&&z(Lr)})}u(Aa),u(G);var Sa=E(G,2);{var Pr=z=>{var S=Ci(),P=_(S,!0);u(S),D(()=>R(P,l(i).description)),N(z,S)};U(Sa,z=>{l(i)?.description&&z(Pr)})}var Fr=E(Sa,2);{var Or=z=>{var S=Ii(),P=_(S);u(S),D(()=>R(P,`— ${l(i).tagline??""}`)),N(z,S)};U(Fr,z=>{l(i)?.tagline&&z(Or)})}u(K),u(L);var Ta=E(L,2);{var Rr=z=>{var S=Fi();ye(S,21,()=>l(d),P=>P.provider,(P,Y)=>{var W=Pi(),le=_(W),he=_(le),te=_(he,!0);u(he);var de=E(he,2),Ee=_(de,!0);u(de);var Ye=E(de,2);Ya(Ye,{size:16,class:"opacity-50 transition-transform duration-200 group-open:rotate-180"}),u(le);var Re=E(le,2),ve=_(Re);ye(ve,21,()=>l(Y).items,J=>J.id,(J,ie)=>{var qe=Li(),za=_(qe),$e=_(za);_a($e);var Ca,Ge=E($e,2),Qe=_(Ge),Hr=_(Qe,!0);u(Qe);var Ia=E(Qe,2),jr=_(Ia,!0);u(Ia),u(Ge);var Ne=E(Ge,2);Ne.__click=Ae=>Ae.stopPropagation();var Vr=_(Ne);fi(Vr,{size:16}),u(Ne),u(za),u(qe),D(Ae=>{Ca!==(Ca=l(ie).url)&&($e.value=($e.__value=l(ie).url)??""),R(Hr,l(ie).title||"Unknown Title"),R(jr,l(ie).label),ee(Ne,"href",l(ie).sourceLink),ee(Ne,"aria-label",`Перейти на ${Ae??""}`)},[()=>l(ie).label.split("#")[0]?.trim()]),ei(r,[],$e,()=>(l(ie).url,l(o)),Ae=>H(o,Ae)),N(J,qe)}),u(ve),u(Re),u(W),D(()=>{ee(W,"name",`providers-${a.media.id}`),R(te,l(Y).items.length),R(Ee,l(Y).label)}),Ra("toggle",W,J=>{J.target.open&&H(o,l(Y).items[0].url,!0)}),N(P,W)}),u(S),N(z,S)};U(Ta,z=>{l(f)&&z(Rr)})}var Dr=E(Ta,2);{var Ur=z=>{var S=Oi(),P=_(S);ri(P,{get embedUrl(){return l(o)}}),u(S),N(z,S)};U(Dr,z=>{l(o)&&z(Ur)})}u(M),D((z,S,P,Y)=>{ee(Fe,"title",z),R(Ar,S),ee(Oe,"title",P),R(Mr,Y)},[()=>sa(a.media.created_at),()=>ia(a.media.created_at),()=>sa(a.media.updated_at),()=>ia(a.media.updated_at)]),Vt(3,M,()=>_i,()=>({duration:150})),N(g,M)};U($r,g=>{l(t)&&g(Nr)})}u(A),D(()=>{y.disabled=l(s),k=xe($,1,"block text-sm font-bold text-balance group-hover:text-violet-400 sm:text-lg",null,k,{"text-violet-400":l(t)}),R(x,a.media.title),R(b,a.media.subtitle),xe(Be,1,fa({"shrink-0 p-1 transition-transform group-active:scale-90":!0,"bg-violet-400 text-black ":l(t),"bg-zinc-900 text-zinc-400 group-hover:text-white":!l(t)}))}),N(e,A),X()}pa(["click"]);var Hi=I('<div class="divide-y divide-zinc-900 border-y border-zinc-900 sm:border"></div>'),ji=I('<div class="flex justify-center p-4 sm:p-0"><button class="relative cursor-pointer border border-zinc-800 bg-zinc-900 px-6 py-3 transition-transform hover:bg-zinc-800 active:scale-95 disabled:opacity-50"><span>Загрузить ещё</span> <!></button></div>'),Vi=I('<main class="mx-auto w-full max-w-6xl sm:space-y-6 sm:p-9"><div class="space-y-4 py-4 sm:p-0"><div class="px-4 sm:p-0"><div class="relative"><input class="peer w-full border border-zinc-900 bg-zinc-900 py-3 pr-3 pl-10 focus-within:bg-zinc-950 hover:border-zinc-700 focus:border-violet-800 focus:outline-2 focus:outline-violet-500" type="text" placeholder="поиск фильмов и сериалов…"/> <span class="pointer-events-none absolute top-1/2 left-0 -translate-y-1/2 px-3 opacity-80 peer-focus:opacity-100"><!></span></div></div></div> <!> <!></main>');function Xi(e,a){Q(a,!0);const r=20;let t=se(!1),s=se(""),n=se(Oa([])),i=se(!1),o=se(!1),d=se(0);Oa({});let f=se(null);async function c(x,C=!1){const b=new URL(`${pr}/api/search`);b.searchParams.set("q",l(s)),b.searchParams.set("limit",String(r)),b.searchParams.set("offset",String(x));const q=await fetch(b,{signal:l(f)?.signal});if(!q.ok)throw new Error(`Search failed: ${q.statusText}`);const Z=await q.json();H(n,C?[...l(n),...Z.media??[]]:Z.media??[],!0),H(o,(Z.media?.length??0)>=r),H(d,x,!0)}async function m(){H(t,!0),l(f)?.abort(),H(f,new AbortController,!0);try{await c(0,!1)}catch(x){x instanceof Error&&x.name!=="AbortError"&&(console.error("Search error:",x),H(n,[],!0))}finally{H(t,!1)}}async function h(){if(!l(i)){H(i,!0);try{await c(l(d)+r,!0)}catch(x){console.error("Load more error:",x)}finally{H(i,!1)}}}Kr(()=>{m()});var w=Vi(),A=_(w),y=_(A),v=_(y),p=_(v);_a(p),p.__input=m;var O=E(p,2),j=_(O);vi(j,{size:20}),u(O),u(v),u(y),u(A);var T=E(A,2);{var V=x=>{var C=Hi();ye(C,21,()=>l(n),b=>b.id,(b,q)=>{Ui(b,{get media(){return l(q)}})}),u(C),N(x,C)};U(T,x=>{l(n).length&&x(V)})}var $=E(T,2);{var k=x=>{var C=ji(),b=_(C);b.__click=h;var q=_(b);let Z;var Pe=E(q,2);{var Ve=ke=>{_r(ke,{class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 animate-spin"})};U(Pe,ke=>{l(i)&&ke(Ve)})}u(b),u(C),D(()=>{b.disabled=l(i),Z=xe(q,1,"",null,Z,{"opacity-0":l(i)})}),N(x,C)};U($,x=>{l(o)&&!l(t)&&l(n).length>0&&x(k)})}u(w),Jt(p,()=>l(s),x=>H(s,x)),N(e,w),X()}pa(["input","click"]);export{Xi as component};
